{"version":3,"sources":["fonts/Noah/NoahText-Regular.ttf","fonts/Noah/NoahText-Bold.ttf","index.js"],"names":["module","exports","BaseMap","_ref","children","props","_objectWithoutProperties","_excluded","React","createElement","Map","Object","assign","mapStyle","accessToken","center","zoom","options","minZoom","renderWorldCopies","attributionControl","TwoFingerDrag","component","_ref2","map","nav","mapboxgl","NavigationControl","showCompass","showZoom","addControl","on","previousSelectedFeatureId","addSource","type","data","cluster","clusterMaxZoom","clusterRadius","addLayer","id","source","filter","paint","layout","visibility","e","features","queryRenderedFeatures","point","layers","clusterId","properties","cluster_id","getSource","getClusterExpansionZoom","err","easeTo","geometry","coordinates","duration","essential","event","length","setFeatureState","selected","feature","selectedFeatureId","slice","name","url","replace","split","city","address","author","photos","isCaruselShow","onlyOnePhoto","car_el","forEach","photo","index","photo_name","concat","Math","abs","lngLat","lng","Popup","setLngLat","setHTML","addTo","getCanvas","style","cursor","console","log","lon","lat","flyTo","getZoom","setLayoutProperty","App","Fragment","render","document","getElementById"],"mappings":"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","file":"static/js/main.82c3cc71.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/NoahText-Regular.73000660.ttf\";","module.exports = __webpack_public_path__ + \"static/media/NoahText-Bold.ae41f2f0.ttf\";","import React from \"react\";\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { render } from \"react-dom\";\r\nimport { Map } from \"@commodityvectors/react-mapbox-gl\";\r\n\r\nimport './fonts/Noah/NoahText-Regular.ttf';\r\nimport './fonts/Noah/NoahText-Bold.ttf';\r\n\r\nimport \"./style.css\";\r\n\r\nconst BaseMap = ({ children, ...props }) => {\r\n  return (\r\n    <Map\r\n      mapStyle={\"mapbox://styles/valeriabelousova/clfkslwn8001g01pp9irv5yta\"}\r\n      accessToken=\"pk.eyJ1IjoidmFsZXJpYWJlbG91c292YSIsImEiOiJjazVkcm51YzMwZGZjM2xvM2xnZmltOHd5In0.1xUC4Qs0uGpmWUQElmlDGA\"\r\n      center={[37.6156, 55.7522]}\r\n      zoom={3}\r\n      options={{\r\n        minZoom: 3,\r\n        renderWorldCopies: false,\r\n        attributionControl: false}}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </Map>\r\n  );\r\n};\r\n\r\nconst TwoFingerDrag = Map.component(TwoFingerDragComponent);\r\nfunction TwoFingerDragComponent({ map }) {\r\n  const nav = new mapboxgl.NavigationControl({\r\n    showCompass: false,\r\n    showZoom: true\r\n});\r\n  map.addControl(nav, 'top-left');\r\n  map.on('load', () => {\r\n    var previousSelectedFeatureId = null;\r\n    map.addSource('wines', {\r\n        type: 'geojson',\r\n        data: 'https://raw.githubusercontent.com/ValeriaBelousova/json_data/master/wine_poi_id_itog_photos.geojson',\r\n        cluster: true,\r\n        clusterMaxZoom: 14,\r\n        clusterRadius: 38\r\n    });\r\n    map.addSource('msk_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Москва\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        37.6156,\r\n                        55.7522\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('spb_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Санкт-Петербург\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        30.315877,\r\n                        59.939099\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('krs_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Красноярск\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        92.8672,\r\n                        56.0184\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('nino_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Нижний Новгород\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        44.002,\r\n                        56.3287\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('ekb_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Екатеринбург\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        60.6122,\r\n                        56.8519\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('nsb_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Новосибирск\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        82.9346,\r\n                        55.0415\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n    map.addSource('brn_poi', {\r\n        type: 'geojson',\r\n        data: {\r\n            \"type\": \"FeatureCollection\",\r\n            \"features\": [{\r\n                \"type\": \"Feature\",\r\n                \"properties\": {\"name\": \"Барнаул\"},\r\n                \"geometry\": {\r\n                    \"type\": \"Point\",\r\n                    \"coordinates\": [\r\n                        83.7636,\r\n                        53.3606\r\n                    ]\r\n                }\r\n            }]\r\n        }\r\n    });\r\n\r\n    map.addLayer({\r\n        id: 'clusters',\r\n        type: 'circle',\r\n        source: 'wines',\r\n        filter: ['has', 'point_count'],\r\n        paint: {\r\n            'circle-color': [\r\n                'step',\r\n                ['get', 'point_count'],\r\n                '#000000',\r\n                100,\r\n                '#000000',\r\n                750,\r\n                '#000000'\r\n            ],\r\n            'circle-radius': [\r\n                'step',\r\n                ['get', 'point_count'],\r\n                22,\r\n                10,\r\n                30,\r\n                25,\r\n                40\r\n            ]\r\n        }\r\n    });\r\n\r\n    map.addLayer({\r\n        id: 'cluster-count',\r\n        type: 'symbol',\r\n        source: 'wines',\r\n        filter: ['has', 'point_count'],\r\n        layout: {\r\n            'text-field': ['get', 'point_count_abbreviated'],\r\n            'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n            'text-size': 16\r\n        },\r\n        paint: {\r\n              'text-color': '#ffffff'\r\n            }\r\n    });\r\n\r\n    map.addLayer({\r\n        id: 'unclustered-point',\r\n        type: 'circle',\r\n        source: 'wines',\r\n        filter: ['!', ['has', 'point_count']],\r\n        paint: {\r\n            'circle-color': ['case',\r\n            ['==', ['feature-state', 'selected'], true], '#ffffff',\r\n            '#000000'\r\n            ],\r\n            'circle-radius': ['case',\r\n            ['==', ['feature-state', 'selected'], true], 5,\r\n            7\r\n            ],\r\n            'circle-stroke-width': ['case',\r\n            ['==', ['feature-state', 'selected'], true], 2,\r\n            0\r\n            ],\r\n            'circle-stroke-color': ['case',\r\n            ['==', ['feature-state', 'selected'], true], '#000000',\r\n            '#000000'\r\n            ],\r\n        }\r\n    });\r\n    const labelLayer = {\r\n        id: 'label_layer',\r\n        type: 'symbol',\r\n        source: 'wines',\r\n        layout: {\r\n            'text-field': \"{Город}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [0.64, 0.23],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n\r\n    const labelWines = {\r\n        id: 'wine_names',\r\n        type: 'symbol',\r\n        source: 'wines',\r\n        visibility: 'none',\r\n        layout: {\r\n            'text-field': \"{Назва}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [0.54, 0.23],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n\r\n    const msk_label = {\r\n        id: 'msk_names',\r\n        type: 'symbol',\r\n        source: 'msk_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [0.74, -2.33],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const spb_label = {\r\n        id: 'spb_names',\r\n        type: 'symbol',\r\n        source: 'spb_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.54, -1.3],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const krs_label = {\r\n        id: 'krs_names',\r\n        type: 'symbol',\r\n        source: 'krs_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.34, -0.8],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const nino_label = {\r\n        id: 'nino_names',\r\n        type: 'symbol',\r\n        source: 'nino_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'visibility': 'none',\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.34, -0.8],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const ekb_label = {\r\n        id: 'ekb_names',\r\n        type: 'symbol',\r\n        source: 'ekb_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'visibility': 'none',\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.34, -0.8],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const nsb_label = {\r\n        id: 'nsb_names',\r\n        type: 'symbol',\r\n        source: 'nsb_poi',\r\n        visibility: 'none',\r\n        layout: {\r\n            'visibility': 'none',\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.34, -0.8],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n    const brn_label = {\r\n        id: 'brn_names',\r\n        type: 'symbol',\r\n        source: 'brn_poi',\r\n        layout: {\r\n            'visibility': 'none',\r\n            'text-field': \"{name}\",\r\n            'text-size': 15,\r\n            'text-anchor': \"bottom-left\",\r\n            'text-font': ['Roboto Light', 'Arial Unicode MS Bold'],\r\n            'symbol-avoid-edges': true,\r\n            'text-offset': [1.34, -0.8],\r\n        },\r\n        paint: {\r\n        'text-color': '#000000',\r\n        }\r\n    };\r\n\r\n    map.addLayer(labelWines);\r\n    map.addLayer(labelLayer);\r\n    map.addLayer(msk_label);\r\n    map.addLayer(spb_label);\r\n    map.addLayer(krs_label);\r\n    map.addLayer(ekb_label);\r\n    map.addLayer(nsb_label);\r\n    map.addLayer(brn_label);\r\n    map.addLayer(nino_label);\r\n\r\n    map.on('click', 'clusters', (e) => {\r\n        const features = map.queryRenderedFeatures(e.point, {\r\n            layers: ['clusters']\r\n        });\r\n        const clusterId = features[0].properties.cluster_id;\r\n        map.getSource('wines').getClusterExpansionZoom(\r\n            clusterId,\r\n            (err, zoom) => {\r\n                if (err) return;\r\n\r\n                map.easeTo({\r\n                    center: features[0].geometry.coordinates,\r\n                    duration: 3000,\r\n                    essential: true,\r\n                    zoom: zoom + 3\r\n                });\r\n            }\r\n        );\r\n    });\r\n    map.on('click', (event) => {\r\n        const features = map.queryRenderedFeatures(event.point, {layers: ['unclustered-point']});\r\n        if (!features.length) { \r\n            map.setFeatureState({ source: 'wines', id: previousSelectedFeatureId }, { selected: false })\r\n            return;\r\n            }\r\n        else {\r\n            map.setFeatureState({ source: 'wines', id: previousSelectedFeatureId }, { selected: false })\r\n        }\r\n        const feature = features[0];\r\n        if (feature) {\r\n            var selectedFeatureId = feature.id;\r\n            map.setFeatureState({ source: 'wines', id: previousSelectedFeatureId }, { selected: false })\r\n            map.setFeatureState({ source: 'wines', id: selectedFeatureId }, { selected: true })\r\n            previousSelectedFeatureId = selectedFeatureId;\r\n        }\r\n    });\r\n\r\n    map.on('click', 'unclustered-point', (e) => {\r\n      const coordinates = e.features[0].geometry.coordinates.slice();\r\n      const name = e.features[0].properties['Назва'];\r\n      const url = e.features[0].properties['Сайт'];\r\n\r\n      const alt_url = url.replace('https://', '').replace('http://', '').replace('instagram.com/', '').split('/')[0].split('?')[0]\r\n      const type = e.features[0].properties['Тип_з'].replace(';', ',');\r\n      const city = e.features[0].properties['Город'];\r\n      const address = e.features[0].properties['Адрес'];\r\n      const author = e.features[0].properties['Имя_с'];\r\n  \r\n      const photos = e.features[0].properties['photos'].split(',');\r\n\r\n      const isCaruselShow = (photos.length > 0) && (photos[0] != '');\r\n      const onlyOnePhoto = (photos.length == 1) && (photos[0] != '');\r\n\r\n      var car_el = ``;\r\n      photos.forEach((photo, index) => {\r\n                                  var photo_name = photo;\r\n                                  if (index == 0) {\r\n                                      car_el = car_el + \r\n                                      `<div class=\"carousel-item active\">\r\n                                          <img class=\"d-block w-100\"\r\n                                           src=\"https://storage.yandexcloud.net/wine/${photo_name.replace('\\'', '').replace('\\'', '').replace(' ', '')}\" \r\n                                           alt=\"First slide\">\r\n                                      </div>`\r\n                                  }\r\n                                  else {\r\n                                      car_el = car_el + \r\n                                      `<div class=\"carousel-item\">\r\n                                          <img class=\"d-block w-100\"\r\n                                           src=\"https://storage.yandexcloud.net/wine/${photo_name.replace('\\'', '').replace('\\'', '').replace(' ', '')}\" \r\n                                           alt=\"First slide\">\r\n                                      </div>`\r\n                                  }\r\n                                  }\r\n                              )\r\n      \r\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n          coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n      }\r\n\r\n      new mapboxgl.Popup()\r\n          .setLngLat(coordinates)\r\n          .setHTML(\r\n              `<div class='content'>\r\n                  ${isCaruselShow ? `\r\n                      <div class='carousel'>\r\n                      <div id=\"carouselExampleControls\" class=\"carousel slide\" data-ride=\"carousel\">\r\n                          <div class=\"carousel-inner\">\r\n                              ${car_el}\r\n                          </div>\r\n                          ${ !onlyOnePhoto ? `\r\n                              <a class=\"carousel-control-prev\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"prev\">\r\n                              <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n                              <span class=\"sr-only\">Previous</span>\r\n                          </a>\r\n                          <a class=\"carousel-control-next\" href=\"#carouselExampleControls\" role=\"button\" data-slide=\"next\">\r\n                              <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n                              <span class=\"sr-only\">Next</span>\r\n                          </a>` : ``}\r\n                          </div>\r\n                  </div>` : ``}\r\n                  \r\n                  <div class='description'>\r\n                      <div class='name'>${name}</div>\r\n                      <div class='type'>${type}</div>\r\n                      <br>\r\n                      <div class='address'>${city}, ${address}</div>\r\n                      <div class='url'><a href=${url} style=\"color: black\">Сайт</a></div>\r\n                      <br>\r\n                      ${author ? `<div class='type'>Автор винной подборки –</div>\r\n                                  <div class='author'>${author}</div>` : `` }\r\n                  </div>\r\n              </div>`\r\n          )\r\n          .addTo(map);\r\n  });\r\n\r\n    map.on('mouseenter', 'clusters', () => {\r\n        map.getCanvas().style.cursor = 'pointer';\r\n    });\r\n    map.on('mouseleave', 'clusters', () => {\r\n        map.getCanvas().style.cursor = '';\r\n    });\r\n    // Center the map on the coordinates of any clicked circle from the 'circle' layer.\r\n    map.on('click', 'unclustered-point', (e) => {\r\n      console.log(e.features[0].geometry.coordinates)\r\n      var lon = e.features[0].geometry.coordinates[0];\r\n      var lat = e.features[0].geometry.coordinates[1];\r\n      if (e.features[0].id == 73) {\r\n          console.log(e.features[0].id);\r\n          map.flyTo({\r\n          center: [lon, lat + 0.85],\r\n          zoom: 5,\r\n          duration: 6000,\r\n          essential: true\r\n          });\r\n      }\r\n      if (e.features[0].id == 67) {\r\n          console.log(e.features[0].id);\r\n          map.flyTo({\r\n          center: [lon, lat + 0.02],\r\n          zoom: 12,\r\n          duration: 6000,\r\n          essential: true\r\n          });\r\n      }\r\n      else {\r\n          map.flyTo({\r\n          center: [lon, lat + 0.006],\r\n          zoom: 14,\r\n          duration: 4000,\r\n          essential: true\r\n          });\r\n      }\r\n  });\r\n\r\n    map.on('mouseenter', 'unclustered-point', () => {\r\n        map.getCanvas().style.cursor = 'pointer';\r\n    });\r\n    map.on('mouseleave', 'unclustered-point', () => {\r\n        map.getCanvas().style.cursor = '';\r\n    });\r\n    // zoom labels\r\n    map.on('zoom', function(e) {\r\n        var zoom = map.getZoom();\r\n        if (zoom > 11) {\r\n            map.setLayoutProperty('wine_names', 'visibility', 'visible');\r\n        }\r\n        if (zoom <= 11) {\r\n            map.setLayoutProperty('wine_names', 'visibility', 'none');\r\n        }\r\n        if (map.getZoom() > 7) {\r\n            map.setLayoutProperty('label_layer', 'visibility', 'none');\r\n            map.setLayoutProperty('msk_names', 'visibility', 'none');\r\n            map.setLayoutProperty('spb_names', 'visibility', 'none');\r\n            map.setLayoutProperty('krs_names', 'visibility', 'none');\r\n        }\r\n        else {\r\n            map.setLayoutProperty('label_layer', 'visibility', 'visible');\r\n            map.setLayoutProperty('msk_names', 'visibility', 'visible');\r\n            map.setLayoutProperty('spb_names', 'visibility', 'visible');\r\n            map.setLayoutProperty('krs_names', 'visibility', 'visible');\r\n        }\r\n    });\r\n    map.on('zoom', function(e) {\r\n        var zoom = map.getZoom();\r\n        if (zoom < 3.2 || zoom > 7) {\r\n            map.setLayoutProperty('ekb_names', 'visibility', 'none');\r\n            map.setLayoutProperty('nsb_names', 'visibility', 'none');\r\n            map.setLayoutProperty('brn_names', 'visibility', 'none');\r\n        }\r\n        if (zoom < 5 || zoom > 7) {\r\n            map.setLayoutProperty('nino_names', 'visibility', 'none');\r\n        }\r\n        else {\r\n            map.setLayoutProperty('ekb_names', 'visibility', 'visible');\r\n            map.setLayoutProperty('nsb_names', 'visibility', 'visible');\r\n            map.setLayoutProperty('brn_names', 'visibility', 'visible');\r\n            map.setLayoutProperty('nino_names', 'visibility', 'visible');\r\n        }\r\n    });\r\n});\r\n\r\n\r\n\r\n  return null;\r\n}\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <BaseMap>\r\n        <TwoFingerDrag />\r\n      </BaseMap>\r\n    </>\r\n  );\r\n};\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}